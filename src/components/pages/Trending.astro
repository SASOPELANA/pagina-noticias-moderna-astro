---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

const trendingCollection = await getCollection("trending");
const trending = trendingCollection.sort(
  (a, b) => (a.data.order || 99) - (b.data.order || 99),
);
---

<div class="max-w-screen-xl mx-auto my-10 relative">
  <div
    class="grid grid-cols-1 sm:grid-cols-12 gap-5"
    transition:name={trending[0].data.title}
  >
    <!-- Noticia principal -->
    <div class="sm:col-span-5">
      <a href={`/trending/${trending[0].slug}`}>
        <div
          class="bg-cover text-center overflow-hidden"
          title={trending[0].data.title}
        >
          <Image
            src={trending[0].data.image}
            alt={trending[0].data.title}
            class="min-h-[300px] rounded-md"
          />
        </div>
      </a>
      <div
        class="mt-3 bg-white rounded-b lg:rounded-b-none lg:rounded-r flex flex-col justify-between leading-normal"
      >
        <div>
          <a
            href={`/trending/${trending[0].slug}`}
            class="text-xs text-Soft-red uppercase font-medium hover:text-gray-900 transition duration-500 ease-in-out"
          >
            {trending[0].data.subTitle}
          </a>
          <a
            href={`/trending/${trending[0].slug}`}
            class="block text-gray-900 font-bold text-2xl mb-2 hover:text-Soft-orange transition duration-500 ease-in-out"
          >
            {trending[0].data.title}
          </a>
          <p class="text-gray-700 text-base mt-2">
            {trending[0].data.description}
          </p>
        </div>
      </div>
    </div>

    <!-- Noticias secundarias -->

    <div class="sm:col-span-7 grid grid-cols-2 lg:grid-cols-3 gap-5">
      {
        trending.slice(1, 7).map((item) => (
          <div transition:name={item.data.title}>
            <a href={`/trending/${item.slug}`}>
              <Image
                src={item.data.image}
                alt={item.data.title}
                class="h-40 bg-cover text-center overflow-hidden rounded-md"
              />
            </a>
            <a
              href={`/trending/${item.slug}`}
              class="text-gray-900 inline-block font-semibold text-md my-2 hover:text-Soft-orange transition duration-500 ease-in-out"
            >
              {item.data.title}
            </a>
          </div>
        ))
      }
    </div>
  </div>
</div>
