---
import { getEntry, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

const indexCategories: CollectionEntry<"category-index"> | undefined =
  await getEntry("category-index", "index");

const data = indexCategories?.data;
---

{
  data ? (
    <section>
      <div class="max-w-screen-xl mx-auto py-8 mb-4 lg:mb-8">
        <div class="flex flex-col md:flex-row">
          <div class="mr-0 md:mr-8 mb-6 md:mb-0">
            <Image
              src={data.categoriesImg}
              alt="can_help_banner"
              class="w-1/2 md:w-full mx-auto min-w-[300px] md:size-[250px] lg:size-[400px] object-contain"
            />
          </div>

          {/* contenido de categorias */}

          <div class="flex-1 flex flex-col sm:flex-row flex-wrap -mb-4 -mx-2">
            {data.cards.map((card: any) => (
              <div class="w-full sm:w-1/2 mb-4 px-2">
                <div class="h-full py-4 px-6 border border-Dark-grayish-blue border-t-0 border-l-0 rounded-br-xl">
                  <a href={`/categories/${card.slug}`} class="cursor-pointer hover:text-Soft-orange">
                    <h3 class="text-2xl font-bold mb-2 truncate">
                      {card.title}
                    </h3>
                  </a>
                  <a href={`/categories/${card.slug}`} class="cursor-pointer">
                    <p class="text-sm text-shadow-Dark-grayish-blue line-clamp-3 hover:underline">
                      {card.description}
                    </p>
                  </a>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  ) : (
    <div class="max-w-screen-xl mx-auto py-8">
      <p class="text-center text-gray-600">Cargando...</p>
    </div>
  )
}
