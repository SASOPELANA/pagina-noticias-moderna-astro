---
import type { GetStaticPaths } from "astro";
import Layout from "../../layouts/Layout.astro";
import { articles } from "../../data/articles.data";
import type { Article } from "../../types/article";
import { Image } from "astro:assets";

export const getStaticPaths = (() => {
  return articles.map((article: Article) => ({
    params: {
      slug: article.slug,
    },
  }));
}) satisfies GetStaticPaths;

const { slug } = Astro.params;

const currentArticle = articles.filter((article) => article.slug === slug)[0];
---

<Layout title="Nuevo Artículo" description="Página">
  <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
    <!-- Título del artículo -->
    <h1
      class="font-bold text-3xl sm:text-4xl lg:text-5xl mb-4 sm:mb-6 leading-tight text-gray-900"
      transition:name={currentArticle.title}
    >
      {currentArticle.title}
    </h1>

    <!-- Descripción/Subtítulo -->
    <p
      class="text-base sm:text-lg lg:text-xl mb-8 sm:mb-10 text-gray-600 italic font-light border-l-4 border-Soft-orange pl-4 sm:pl-6"
    >
      {currentArticle.description}
    </p>

    <!-- Imagen destacada -->
    <div
      class="mb-8 sm:mb-12 overflow-hidden rounded-xl shadow-2xl hover:shadow-3xl transition-shadow duration-300"
    >
      <Image
        src={currentArticle.image}
        alt={currentArticle.title}
        width={800}
        height={600}
        class="w-full h-auto object-cover"
      />
    </div>

    <!-- Contenido del artículo -->
    <div class="prose prose-lg sm:prose-xl max-w-none mb-10 sm:mb-14">
      <p
        class="text-base sm:text-lg leading-relaxed text-gray-700 whitespace-pre-line"
      >
        {currentArticle.content}
      </p>
    </div>

    <!-- Botón de retorno -->
    <div
      class="flex justify-center sm:justify-end pt-8 border-t border-gray-200"
    >
      <a
        id="go-back"
        href="/"
        class="group inline-flex items-center gap-2 px-6 py-3 border-2 bg-Soft-orange text-white font-semibold rounded-lg shadow-lg hover:text-Soft-red hover:bg-Off-white hover:border-Soft-red"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Volver al atrás
      </a>
    </div>
  </article>
</Layout>

<script>
  document.addEventListener("astro:page-load", () => {
    const backBtn = document.querySelector("#go-back");

    backBtn?.addEventListener("click", () => {
      history.back();
    });
  });
</script>
